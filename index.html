<!DOCTYPE html>
<html class="dark" lang="tr">
	<head>
		<meta charset="utf-8" />
		<meta content="width=device-width, initial-scale=1.0" name="viewport" />
		<title>İftara Kalan - Iftarakalan.com</title>
		<meta name="description" content="Ramazan ayında iftara kalan süreyi anlık olarak takip edin. Konumunuza özel iftar saati ve geri sayım." />

		<!-- Favicon (Hilal İkonu) -->
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />

		<!-- PWA Manifest -->
		<link rel="manifest" href="/manifest.json" />

		<!-- SEO & Social Media -->
		<meta name="theme-color" content="#052e16" />
		<meta property="og:title" content="İftara Kalan 🌙" />
		<meta property="og:description" content="Ramazan ayında iftara kalan süreyi anlık olarak takip edin. Konumunuza özel iftar saati." />
		<meta property="og:type" content="website" />
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:title" content="İftara Kalan 🌙" />
		<meta name="twitter:description" content="Ramazan ayında iftara kalan süreyi anlık olarak takip edin." />

		<!-- Fonts -->
		<link href="https://fonts.googleapis.com" rel="preconnect" />
		<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
		<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" rel="stylesheet" />

		<!-- Tailwind CSS -->
		<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
		<script>
			tailwind.config = {
				darkMode: "class",
				theme: {
					extend: {
						colors: {
							primary: "#34d399",
							"background-light": "#f0fdf4",
							"background-dark": "#052e16",
						},
						fontFamily: {
							display: ["Plus Jakarta Sans"],
						},
						borderRadius: {
							DEFAULT: "0.5rem",
							lg: "1rem",
							xl: "1.5rem",
							full: "9999px",
						},
					},
				},
			};
		</script>

		<style>
			body {
				font-family: "Plus Jakarta Sans", sans-serif;
			}
			.countdown-card {
				background: rgba(255, 255, 255, 0.05);
				backdrop-filter: blur(10px);
				-webkit-backdrop-filter: blur(10px);
				border: 1px solid rgba(255, 255, 255, 0.1);
				transition: all 0.3s ease;
			}
			.dark .countdown-card {
				background: rgba(255, 255, 255, 0.05);
				border-color: rgba(255, 255, 255, 0.1);
			}
			.light .countdown-card {
				background: rgba(5, 46, 22, 0.05);
				border-color: rgba(5, 46, 22, 0.1);
			}
			.bg-pattern {
				background-image: url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><g fill="%2334d399" fill-opacity="0.05"><path d="M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm54-12c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 60c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3z"/></g></svg>');
			}
			.hidden {
				display: none !important;
			}
		</style>
	</head>
	<body class="bg-background-light dark:bg-background-dark font-display text-white transition-colors duration-300">
		<!-- Loading Overlay -->
		<div id="loading" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center">
			<div class="bg-white/10 dark:bg-black/20 border border-white/20 rounded-xl p-8 text-center">
				<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"></div>
				<p class="text-white loading-text">Yükleniyor...</p>
			</div>
		</div>

		<div class="relative min-h-screen w-full flex flex-col bg-gradient-to-br from-background-dark via-background-dark to-[#064e3b] bg-pattern overflow-x-hidden">
			<!-- Header -->
			<header class="w-full max-w-6xl mx-auto p-4 sm:p-6 lg:p-8">
				<div class="flex flex-col sm:flex-row items-center justify-between gap-4">
					<!-- Logo & Title -->
					<div class="flex items-center gap-3">
						<!-- Hilal İkonu (İslami Sembol) -->
						<span class="text-4xl" aria-hidden="true">🌙</span>
						<h1 class="text-white text-xl font-bold">İftara Kalan</h1>
					</div>

					<!-- Location Info & Change Button -->
					<div class="flex items-center gap-2 sm:gap-4">
						<div class="text-white/70 text-sm" role="status" aria-live="polite">
							<span id="location-info">Konum tespit ediliyor...</span>
						</div>
						<button id="change-location-btn" class="bg-primary/20 hover:bg-primary/30 text-white px-4 py-2 rounded-lg text-sm transition-colors" aria-label="Konumu manuel olarak değiştir">Konum Değiştir</button>
					</div>
				</div>

				<!-- Manual Location Selection Panel (Hidden by default) -->
				<div id="manual-location" class="hidden mt-4 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-6 relative">
					<!-- Kapatma Butonu (Z-index yüksek) -->
					<button id="close-panel-btn" class="absolute top-4 right-4 text-white/70 hover:text-white hover:bg-white/10 rounded-lg p-2 transition-colors z-10" aria-label="Konum panelini kapat">
						<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
						</svg>
					</button>

					<!-- Başlık ve Otomatik Konuma Dön -->
					<div class="flex items-center gap-3 mb-4 pr-12">
						<h3 class="text-white text-lg font-semibold">Konum Seçin</h3>

						<!-- Otomatik Konuma Dön Butonu - Başlığın hemen yanında -->
						<button id="reset-location-btn" class="hidden bg-primary/20 hover:bg-primary/30 text-primary text-sm px-3 py-1.5 rounded-lg transition-colors flex items-center gap-1.5 whitespace-nowrap" aria-label="Otomatik konuma geri dön">
							<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
							</svg>
							Otomatik Konum
						</button>
					</div>

					<div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
						<div>
							<label class="block text-white/70 text-sm mb-2">Ülke</label>
							<select id="country-select" class="bg-white/10 dark:bg-black/20 border border-white/20 rounded-lg text-white text-sm focus:ring-primary focus:border-primary block w-full p-2.5" disabled>
								<option value="2" selected>TÜRKİYE</option>
							</select>
						</div>
						<div>
							<label class="block text-white/70 text-sm mb-2">Şehir</label>
							<select id="city-select" class="bg-white/10 dark:bg-black/20 border border-white/20 rounded-lg text-white text-sm focus:ring-primary focus:border-primary block w-full p-2.5">
								<option value="">Şehir seçin...</option>
							</select>
						</div>
						<div>
							<label class="block text-white/70 text-sm mb-2">İlçe</label>
							<select id="district-select" class="bg-white/10 dark:bg-black/20 border border-white/20 rounded-lg text-white text-sm focus:ring-primary focus:border-primary block w-full p-2.5" disabled>
								<option value="">Önce şehir seçin...</option>
							</select>
						</div>
					</div>
				</div>
			</header>

			<!-- Main Content -->
			<main class="flex-1 flex flex-col items-center justify-center text-center p-4">
				<div class="space-y-8 max-w-4xl mx-auto">
					<!-- Error Message -->
					<div id="error-message" class="hidden bg-red-500/20 border border-red-500/30 rounded-lg p-4 text-red-200 text-sm max-w-md mx-auto">Hata mesajı</div>

					<!-- Main Title -->
					<h2 class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-white tracking-tight">İftara Kalan Süre</h2>

					<!-- Countdown Cards -->
					<div class="grid grid-cols-3 gap-4 sm:gap-6 md:gap-8">
						<!-- Hours Card -->
						<div class="countdown-card rounded-xl p-4 sm:p-6 text-white w-28 h-28 sm:w-36 sm:h-36 md:w-48 md:h-48 flex flex-col items-center justify-center" role="timer" aria-label="Saat">
							<span id="hours" class="text-4xl sm:text-5xl md:text-7xl font-bold tracking-tighter tabular-nums" aria-live="polite">00</span>
							<span class="text-sm sm:text-base md:text-lg opacity-70 mt-2" aria-hidden="true">Saat</span>
						</div>

						<!-- Minutes Card -->
						<div class="countdown-card rounded-xl p-4 sm:p-6 text-white w-28 h-28 sm:w-36 sm:h-36 md:w-48 md:h-48 flex flex-col items-center justify-center" role="timer" aria-label="Dakika">
							<span id="minutes" class="text-4xl sm:text-5xl md:text-7xl font-bold tracking-tighter tabular-nums" aria-live="polite">00</span>
							<span class="text-sm sm:text-base md:text-lg opacity-70 mt-2" aria-hidden="true">Dakika</span>
						</div>

						<!-- Seconds Card -->
						<div class="countdown-card rounded-xl p-4 sm:p-6 text-white w-28 h-28 sm:w-36 sm:h-36 md:w-48 md:h-48 flex flex-col items-center justify-center" role="timer" aria-label="Saniye">
							<span id="seconds" class="text-4xl sm:text-5xl md:text-7xl font-bold tracking-tighter tabular-nums" aria-live="polite">00</span>
							<span class="text-sm sm:text-base md:text-lg opacity-70 mt-2" aria-hidden="true">Saniye</span>
						</div>
					</div>

					<!-- Iftar Time Display -->
					<div class="bg-primary/20 dark:bg-primary/20 text-white py-3 px-6 rounded-lg inline-block shadow-lg" role="status" aria-live="polite">
						<p class="text-lg font-medium">İftar Saati: <span id="iftar-time" class="font-bold" aria-label="İftar saati">--:--</span></p>
					</div>

					<!-- Notification Settings Panel -->
					<div id="notification-panel" class="hidden countdown-card rounded-xl p-6 max-w-md mx-auto">
						<div class="flex items-center justify-between mb-4">
							<h3 class="text-white text-lg font-semibold flex items-center gap-2">
								<span>🔔</span>
								Bildirimler
							</h3>
							<button id="close-notification-panel" class="text-white/70 hover:text-white transition-colors" aria-label="Bildirim panelini kapat">
								<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
								</svg>
							</button>
						</div>

						<!-- Notification Status -->
						<div id="notification-status" class="mb-4 p-3 rounded-lg bg-white/5 text-sm text-white/70">Bildirimler devre dışı</div>

						<!-- Enable Button -->
						<button id="enable-notifications-btn" class="w-full bg-primary hover:bg-primary/80 text-white font-medium py-3 px-4 rounded-lg transition-colors mb-4">Bildirimleri Aktif Et</button>

						<!-- Settings (Hidden until enabled) -->
						<div id="notification-settings" class="hidden space-y-3">
							<label class="flex items-center justify-between cursor-pointer">
								<span class="text-white text-sm">İftara 1 saat kala</span>
								<input type="checkbox" id="notify-1hour" checked class="w-5 h-5 text-primary rounded focus:ring-primary" />
							</label>
							<label class="flex items-center justify-between cursor-pointer">
								<span class="text-white text-sm">İftara 30 dakika kala</span>
								<input type="checkbox" id="notify-30min" checked class="w-5 h-5 text-primary rounded focus:ring-primary" />
							</label>
							<label class="flex items-center justify-between cursor-pointer">
								<span class="text-white text-sm">İftara 10 dakika kala</span>
								<input type="checkbox" id="notify-10min" checked class="w-5 h-5 text-primary rounded focus:ring-primary" />
							</label>

							<!-- Test & Disable Buttons -->
							<div class="flex gap-2 mt-4">
								<button id="test-notification-btn" class="flex-1 bg-white/10 hover:bg-white/20 text-white text-sm py-2 px-4 rounded-lg transition-colors">Test Et</button>
								<button id="disable-notifications-btn" class="flex-1 bg-red-500/20 hover:bg-red-500/30 text-red-200 text-sm py-2 px-4 rounded-lg transition-colors">Devre Dışı Bırak</button>
							</div>
						</div>
					</div>

					<!-- Notification Toggle Button (Floating) -->
					<button id="notification-toggle-btn" class="hidden fixed bottom-6 right-6 bg-primary hover:bg-primary/80 text-white p-4 rounded-full shadow-lg transition-all hover:scale-110" aria-label="Bildirim ayarları">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
						</svg>
					</button>
				</div>
			</main>

			<!-- Footer -->
			<footer class="w-full text-center p-4">
				<p class="text-sm text-white/50">Made with ❤️ for Ramadan</p>
			</footer>
		</div>

		<!-- JavaScript Modules -->
		<script src="js/storage.js"></script>
		<script src="js/api.js"></script>
		<script src="js/location.js"></script>
		<script src="js/countdown.js"></script>
		<script src="js/notifications.js"></script>
		<script src="js/app.js"></script>
	</body>
</html>
